(this["webpackJsonpmain-admin"]=this["webpackJsonpmain-admin"]||[]).push([[0],{443:function(e,a,t){},590:function(e,a,t){e.exports=t(898)},898:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),c=t(19),l=t.n(c),r=(t(443),t(491)),s=t(465),i=t(411),u=t(315),m=t(400),g=function(e){return o.a.createElement("div",null,o.a.createElement("div",{style:{fontFamily:"monospace",marginLeft:"15px"}},o.a.createElement("p",null,"Digite seu email e senha cadastrados")),o.a.createElement(u.a,e),o.a.createElement("a",{href:"https://altieriescultor.com/",class:"goToSite"},"IR PARA O SITE"))},f=function(e){return o.a.createElement(m.a,e,o.a.createElement(g,e))},d=t(40),b=t.n(d),p=t(50),v=t(28),h=t(77),E=t(489),j=t(94),O=t(180),y=t(490),S=t(172),U=t(96),w=t(488),I=t(175),D=t(174),k=t(394),A=t(153),P=t(72),L=t(404),T=t(170),x=t(247),C=t(294),R=t(296),F=t(318),M=t(393),N=t(143),_=t(425);function B(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=Object(n.useState)([]),r=Object(v.a)(l,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){if(t[c])if("object"!==typeof t[c]){var e=[t[c]];i(e)}else i(Object.values(t[c]))}),[t,c]),o.a.createElement(o.a.Fragment,null,s.map((function(e,a){return o.a.createElement("div",{className:"urlPost",key:a},o.a.createElement("a",{href:e},a))})))}var q=t(187);function V(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=e.setImgState,r=e.acceptMultiple,s=e.label,i=e.placeholder,u=e.validate,m=e.removeImage,g=Object(n.useState)([]),f=Object(v.a)(g,2),d=f[0],b=f[1];Object(n.useEffect)((function(){var e=!1;return function(){var a;t[c]&&("object"!==typeof t[c]?(a=[t[c]],e||b(a)):(a=Object.values(t[c]),e||b(a))),console.log(t)}(),function(){e=!0}}),[t,c]);var p=Object(n.useCallback)((function(e){var a=d;console.log(a),e.forEach((function(e){r?a.push(URL.createObjectURL(e)):a=[URL.createObjectURL(e)]})),b(a),l&&l(a),"undefined"!==typeof u&&u(a),console.log(a)}),[d,u,l,r]);var h=Object(q.a)({accept:"image/*",multiple:r,noClick:!0,onDrop:p}),E=h.getRootProps,j=h.getInputProps,O=h.open,y=h.isDragActive;return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"MuiFormLabel-root MuiInputLabel-root  "},o.a.createElement("span",null,s)),o.a.createElement("div",Object.assign({},E(),{className:"UrlPostEditContainer"}),o.a.createElement("input",j()),y?o.a.createElement("p",null,i):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,i),o.a.createElement("button",{type:"button",onClick:O},"Clique para selecionar")),o.a.createElement("div",{className:"preview"},"object"===typeof d&&d.map((function(e,a){return o.a.createElement("div",{className:"imageContainer",key:a},o.a.createElement("img",{alt:"imagem",src:e,className:"imgEdit"}),o.a.createElement("span",{className:"btnDeleteImage",onClick:function(){return function(e){var a=d;m(d[e]),a.splice(e,1),b(a),l&&l(a)}(a)}},"X"))})))))}var G=t(913),z=t(954),X=t(16),H=t.n(X);t(498);H.a.apps.length||H.a.initializeApp({apiKey:"AIzaSyD46nX4-Ks9WMiQ1hazUe2PZAkGX_Cq7kQ",authDomain:"altiereescultor.firebaseapp.com",databaseURL:"https://altiereescultor.firebaseio.com",projectId:"altiereescultor",storageBucket:"altiereescultor.appspot.com",messagingSenderId:"851171901718",appId:"1:851171901718:web:3f1bf7c3d4867dc7d25037",measurementId:"G-D5SPTWZ2H0"});var W=H.a.storage();function K(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(h.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(a).then((function(e){return e.blob()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e){var a={};return e.title||(a.title=["\xc9 necess\xe1rio preencher o t\xedtulo"]),e.content||(a.content=["\xc9 necess\xe1rio preencher o conte\xfado"]),e.date||(a.date=["\xc9 necess\xe1rio uma data"]),a},J=function(e){return o.a.createElement(E.a,e,o.a.createElement(j.a,{label:"Pesquisar",source:"title",alwaysOn:!0}))},$=function(e){var a=Object(_.a)((function(e){return e.breakpoints.down("sm")}));return o.a.createElement(O.b,Object.assign({},e,{title:"Posts",filters:o.a.createElement(J,null)}),a?o.a.createElement(y.a,{primaryText:function(e){return e.title},secondaryText:function(e){return"".concat(e.published?"Publicado":"N\xe3o Publicado")},tertiaryText:function(e){return new Date(e.date).toLocaleDateString()}}):o.a.createElement(S.a,{rowClick:"edit"},o.a.createElement(U.a,{source:"id"}),o.a.createElement(U.a,{source:"title",label:"T\xedtulo"}),o.a.createElement(U.a,{source:"content",label:"Conte\xfado"}),o.a.createElement(w.a,{source:"imgsmall"}),o.a.createElement(B,{source:"imgs"}),o.a.createElement(I.a,{source:"date",label:"Data"}),o.a.createElement(D.a,{source:"published",label:"Publicado"}),o.a.createElement(I.a,{source:"lastupdate",label:"Atualizado em"})))},Y=function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(v.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(v.a)(m,2),f=g[0],d=g[1],E=Object(n.useState)([]),O=Object(v.a)(E,2),y=O[0],S=O[1],U=Object(n.useState)(""),w=Object(v.a)(U,2),I=w[0],D=w[1],M=function(e){var a=Object(k.a)("colecao"),t=Object(v.a)(a,1)[0],c=Object(A.a)(),r=Object(P.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(h.a)(b.a.mark((function a(n,o){var i,m,g,f,v,E,j;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),console.log(e.imgs),console.log(e.imgsmall),i=e.imgsmall,m=e.imgs,g=n.id,f=n.title,a.next=9,K(i);case 9:v=a.sent,E={imgsmall:"",imgs:[]},(j=W.ref("/colecao/".concat(g,"/imgsmall/").concat(f)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),d(!1),u(!0)}),(function(){j.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgsmall=e;var a=0;m.forEach(function(){var e=Object(h.a)(b.a.mark((function e(i,v){var h,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(i);case 2:h=e.sent,(j=W.ref("/colecao/".concat(g,"/imgs/").concat(f,"-").concat(v)).put(h)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),d(!1),u(!0)}),(function(){j.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgs.push(e),console.log(m.length),console.log(a),a===m.length-1&&null!=E&&(console.log(E),t({payload:{data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.created","info",{smart_count:1}),c(o,s,a.id,a)}})),a++}))}));case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())}))}));case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(L.a,Object.assign({},e,{onSave:i}))},N=function(e){return o.a.createElement(T.a,e,o.a.createElement(M,{imgs:y,imgsmall:I,label:"SALVAR"}))};return o.a.createElement(x.b,e,o.a.createElement(C.a,{validate:Z,toolbar:o.a.createElement(N,{imgsmall:I,imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id",defaultValue:o.a.useMemo((function(){return Math.random().toString(36).substr(2,9)}),[])}),o.a.createElement(j.a,{source:"title",label:"T\xedtulo"}),o.a.createElement(j.a,{multiline:!0,source:"content",label:"Conte\xfado"}),o.a.createElement(V,{validate:function(e){console.log("TESTE"),console.log(e),"undefined"!==typeof e?(console.log("333TESTE"),D(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},source:"imgsmall",acceptMultiple:!1,label:"Capa do post",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(V,{validate:function(e){console.log("TESTE222"),console.log(e),"undefined"!==typeof e?(console.log("333TESTE"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(R.a,{source:"date",label:"Data"}),o.a.createElement(F.a,{source:"published",label:"P\xfablico",defaultValue:!1}),o.a.createElement(G.a,{open:i,autoHideDuration:3e3},o.a.createElement(z.a,{severity:f?"success":"error"},c))))},ee=function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(v.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(v.a)(m,2),f=g[0],d=g[1],E=Object(n.useState)([]),O=Object(v.a)(E,2),y=O[0],S=O[1],U=Object(n.useState)([]),w=Object(v.a)(U,2),I=w[0],D=w[1],k=Object(n.useState)(""),x=Object(v.a)(k,2),_=x[0],B=x[1];function q(e){var a=I;a.push(e),D(a)}function X(e){if(Array.isArray(e))e.forEach((function(e){-1===e.search("blob:")&&W.refFromURL(e).delete().then((function(){l("Delete Success!"),d(!0),u(!0)}),(function(e){l("Delete error: "+e),d(!1),u(!0)}))}));else if("undefined"!==typeof e&&-1===e.search("blob:")){console.log(e),W.refFromURL(e).delete().then((function(){l("Delete Success!"),d(!0),u(!0)}),(function(e){l("Delete error: "+e),d(!1),u(!0)}))}}console.log(e);var H=function(e){var a=Object(M.a)("colecao"),t=Object(v.a)(a,1)[0],c=Object(A.a)(),r=Object(P.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(h.a)(b.a.mark((function a(n,o){var i,m,g,f,v,E,j,O;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return X(I),i=n.imgsmall,console.log(i),void 0!==i&&""!==i||(console.log("ttttt"),i=e.imgsmall),0===(m=e.imgs).length&&(m=n.imgs),console.log(i),console.log(m),g=n.id,f=n.title,a.next=12,K(i);case 12:v=a.sent,E={imgsmall:i,imgs:m},0===i.search("blob:")?(console.log("tese 1"),(j=W.ref("/colecao/".concat(g,"/imgsmall/").concat(f)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),d(!1),u(!0)}),(function(){j.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgsmall=e;var a=0,i=0;m.forEach(function(){var e=Object(h.a)(b.a.mark((function e(v,h){var j,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==v.search("blob:")){e.next=7;break}return i++,e.next=4,K(v);case 4:j=e.sent,(O=W.ref("/colecao/".concat(g,"/imgs/").concat(f,"-").concat(h)).put(j)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),d(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgs.push(e),a===m.length-1&&null!=E&&(console.log(E),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 7:a++;case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(i),0===i&&null!=E&&(console.log(E),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}))):(console.log("tese 2"),O=0,m.forEach(function(){var e=Object(h.a)(b.a.mark((function e(a,i){var v,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.search("blob:")),0!==a.search("blob:")){e.next=7;break}return e.next=4,K(a);case 4:v=e.sent,(h=W.ref("/colecao/".concat(g,"/imgs/").concat(f,"-").concat(i)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),d(!1),u(!0)}),(function(){h.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgs.push(e),console.log(m.length),console.log(O),O===m.length-1&&null!=E&&(console.log(E),E.imgs=E.imgs.filter((function(e){return-1===e.search("blob:")})),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 7:O++;case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(O),0===O&&null!=E&&(console.log(E),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}})));case 15:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(L.a,Object.assign({},e,{onSave:i}))},Q=function(e){return o.a.createElement(T.a,e,o.a.createElement(H,{imgs:y,imgsmall:_,label:"SALVAR"}))};return o.a.createElement(N.b,e,o.a.createElement(C.a,{toolbar:o.a.createElement(Q,{imgsmall:_,imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id"}),o.a.createElement(j.a,{source:"title",label:"T\xedtulo"}),o.a.createElement(j.a,{multiline:!0,source:"content",label:"Conte\xfado"}),o.a.createElement(V,{validate:function(e){console.log("Teste Imagem"),console.log(e),"undefined"!==typeof e?(console.log("Teste Imagem 2"),B(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},setImgState:function(e){B(e)},removeImage:q,source:"imgsmall",acceptMultiple:!1,label:"Capa do post",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(V,{validate:function(e){console.log("Teste Images"),console.log(e),"undefined"!==typeof e?(console.log("Teste Images2"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},setImgState:function(e){S(e)},removeImage:q,source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(R.a,{source:"date",label:"Data"}),o.a.createElement(F.a,{source:"published",label:"Publicar"}),o.a.createElement(R.a,{disabled:!0,source:"lastupdate",label:"Atualizado em"}),o.a.createElement(G.a,{open:i,autoHideDuration:3e3},o.a.createElement(z.a,{severity:f?"success":"error"},c))))};function ae(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=Object(n.useState)([]),r=Object(v.a)(l,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){if(t[c])if("object"!==typeof t[c]){var e=[t[c]];i(e)}else i(Object.values(t[c]))}),[t,c]),o.a.createElement(o.a.Fragment,null,s.map((function(e,a){return o.a.createElement("div",{className:"urlPost",key:a},o.a.createElement("a",{href:e.src},a))})))}function te(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=e.setImgState,r=e.acceptMultiple,s=e.label,i=e.placeholder,u=e.validate,m=e.removeImage,g=Object(n.useState)([]),f=Object(v.a)(g,2),d=f[0],b=f[1];Object(n.useEffect)((function(){var e=!1;return function(){var a;t[c]&&("object"!==typeof t[c]?(a=[t[c]],e||b(a)):(a=Object.values(t[c]),e||b(a))),console.log(t)}(),function(){e=!0}}),[t,c]);var p=Object(n.useCallback)((function(e){var a=d;console.log(a),e.forEach((function(e){r?a.push({src:URL.createObjectURL(e)}):a=[URL.createObjectURL(e)]})),b(a),l&&l(a),"undefined"!==typeof u&&u(a),console.log(a)}),[d,u,l,r]);function h(e){var a=d;m(d[e]),a.splice(e,1),b(a),l&&l(a)}var E=Object(q.a)({accept:"image/*",multiple:r,noClick:!0,onDrop:p}),j=E.getRootProps,O=E.getInputProps,y=E.open,S=E.isDragActive;return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"MuiFormLabel-root MuiInputLabel-root  "},o.a.createElement("span",null,s)),o.a.createElement("div",Object.assign({},j(),{className:"UrlPostEditContainer"}),o.a.createElement("input",O()),S?o.a.createElement("p",null,i):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,i),o.a.createElement("button",{type:"button",onClick:y},"Clique para selecionar")),o.a.createElement("div",{className:"preview"},"object"===typeof d&&d.map((function(e,a){return o.a.createElement(n.Fragment,{key:a},r?o.a.createElement("div",{className:"imageContainer"},o.a.createElement("img",{alt:"imagem",src:e.src,className:"imgEdit"}),o.a.createElement("input",{className:"imgGaleriaTitle",type:"text",placeholder:"T\xedtulo para a imagem",onChange:function(e){return function(e,a){var t=d;console.log(e.target.value),t[a].title=e.target.value}(e,a)},defaultValue:e.title}),o.a.createElement("span",{className:"btnDeleteImage",onClick:function(){return h(a)}},"X")):o.a.createElement("div",{className:"imageContainer",key:a},o.a.createElement("img",{alt:"imagem",src:e,className:"imgEdit"}),o.a.createElement("span",{className:"btnDeleteImage",onClick:function(){return h(a)}},"X")))})))))}function ne(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(h.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(a).then((function(e){return e.blob()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=function(e){var a={};return e.name||(a.name=["\xc9 necess\xe1rio preencher o nome"]),a},le=function(e){var a=Object(_.a)((function(e){return e.breakpoints.down("sm")}));return console.log(e),o.a.createElement(O.b,Object.assign({},e,{title:"Galeria"}),a?o.a.createElement(y.a,{primaryText:function(e){return e.name},secondaryText:function(e){return"".concat(e.published?"Publicado":"N\xe3o Publicado")},tertiaryText:function(e){return new Date(e.updated_at).toLocaleDateString()}}):o.a.createElement(S.a,{rowClick:"edit"},o.a.createElement(U.a,{source:"id"}),o.a.createElement(U.a,{source:"name",label:"Nome"}),o.a.createElement(w.a,{source:"imgsmall",label:"Capa"}),o.a.createElement(ae,{source:"imgs",label:"Imagens"}),o.a.createElement(D.a,{source:"published",label:"Publicar"})))},re=function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(v.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(v.a)(m,2),f=g[0],d=g[1],E=Object(n.useState)([]),O=Object(v.a)(E,2),y=O[0],S=O[1],U=Object(n.useState)(""),w=Object(v.a)(U,2),I=w[0],D=w[1],k=Object(n.useState)([]),x=Object(v.a)(k,2),R=x[0],_=x[1];function B(e){var a=R;a.push(e),_(a)}function q(e){if(Array.isArray(e))e.forEach((function(e){-1===e.search("blob:")&&W.refFromURL(e).delete().then((function(){l("Delete Success!"),d(!0),u(!0)}),(function(e){l("Delete error: "+e),d(!1),u(!0)}))}));else if("undefined"!==typeof e&&-1===e.search("blob:")){console.log(e),W.refFromURL(e).delete().then((function(){l("Delete Success!"),d(!0),u(!0)}),(function(e){l("Delete error: "+e),d(!1),u(!0)}))}}console.log(e);var V=function(e){var a=Object(M.a)("galeria"),t=Object(v.a)(a,1)[0],c=Object(A.a)(),r=Object(P.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(h.a)(b.a.mark((function a(n,o){var i,m,g,f,v,E,j,O,y;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return q(R),i=n.imgsmall,console.log(i),void 0!==i&&""!==i||(console.log("ttttt"),i=e.imgsmall),0===(m=e.imgs).length&&(m=n.imgs),console.log(m),g=n.id,f=n.name,a.next=11,ne(i);case 11:v=a.sent,E={imgs:m,imgsmall:i},j=0,console.log(E),0===i.search("blob:")?(console.log("tese 1"),(O=W.ref("/galeria/".concat(g,"/imgsmall/").concat(f)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),d(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgsmall=e;var a=0,i=0;m.forEach(function(){var e=Object(h.a)(b.a.mark((function e(v,h){var j,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==v.src.search("blob:")){e.next=7;break}return i++,e.next=4,ne(v);case 4:j=e.sent,(O=W.ref("/galeria/".concat(g,"/imgs/").concat(f,"-").concat(h)).put(j)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),d(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgs.push({src:e,title:v.title}),a===m.length-1&&null!=E&&(console.log(E),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 7:a++;case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(i),0===i&&null!=E&&(console.log(E),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}))):(y=0,m.forEach(function(){var e=Object(h.a)(b.a.mark((function e(a,i){var v,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.src.search("blob:")),0!==a.src.search("blob:")){e.next=8;break}return y++,e.next=5,ne(a);case 5:v=e.sent,(h=W.ref("/galeria/".concat(g,"/imgs/").concat(f,"-").concat(i)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),d(!1),u(!0)}),(function(){h.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgs.push({src:e,title:a.title}),console.log(m.length),console.log(j),j===m.length-1&&null!=E&&(console.log(E),E.imgs=E.imgs.filter((function(e){return-1===e.src.search("blob:")})),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 8:j++;case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(y),0===y&&null!=E&&(console.log(E),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}})));case 15:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(L.a,Object.assign({},e,{onSave:i}))},X=function(e){return o.a.createElement(T.a,e,o.a.createElement(V,{imgs:y,imgsmall:I,label:"SALVAR"}))};return o.a.createElement(N.b,e,o.a.createElement(C.a,{toolbar:o.a.createElement(X,{imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id"}),o.a.createElement(j.a,{source:"name",label:"Nome"}),o.a.createElement(te,{validate:function(e){console.log(e),"undefined"!==typeof e?(console.log("IMAGEM VALIDADA"),D(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},setImgState:function(e){D(e)},removeImage:B,source:"imgsmall",acceptMultiple:!1,label:"Capa",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(te,{validate:function(e){console.log(e),"undefined"!==typeof e?(console.log("IMAGENS VALIDADAS"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},setImgState:function(e){S(e)},removeImage:B,source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(F.a,{source:"published",label:"Publicado"}),o.a.createElement(G.a,{open:i,autoHideDuration:3e3},o.a.createElement(z.a,{severity:f?"success":"error"},c))))},se=function(e){var a=Object(n.useState)(""),t=Object(v.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(v.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(v.a)(m,2),f=g[0],d=g[1],E=Object(n.useState)([]),O=Object(v.a)(E,2),y=O[0],S=O[1],U=Object(n.useState)(""),w=Object(v.a)(U,2),I=w[0],D=w[1],R=function(e){var a=Object(k.a)("galeria"),t=Object(v.a)(a,1)[0],c=Object(A.a)(),r=Object(P.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(h.a)(b.a.mark((function a(n,o){var i,m,g,f,v,E,j,O;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),console.log(e.imgs),i=e.imgs,m=n.name,g=n.id,f=[],a.next=8,ne(e.imgsmall);case 8:v=a.sent,E={imgs:[],imgsmall:""},j=0,(O=W.ref("/galeria/".concat(g,"/imgsmall/").concat(m)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),d(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgsmall=e,i.forEach(function(){var e=Object(h.a)(b.a.mark((function e(a,v){var h,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(a.src);case 2:h=e.sent,f.push(a.title),(O=W.ref("/galeria/".concat(g,"/imgs/").concat(m,"-").concat(v)).put(h)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),d(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),d(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),E.imgs.push({src:e,title:a.title}),console.log(i.length),console.log(E),console.log("index: "+j),j===i.length&&null!=E&&(console.log(E),t({payload:{data:Object(p.a)(Object(p.a)({},n),{},{imgs:E.imgs,imgsmall:E.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.created","info",{smart_count:1}),c(o,s,a.id,a)}}))}))})),j++;case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())}))}));case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(L.a,Object.assign({},e,{onSave:i}))},M=function(e){return o.a.createElement(T.a,e,o.a.createElement(R,{imgs:y,imgsmall:I,label:"SALVAR"}))};return o.a.createElement(x.b,e,o.a.createElement(C.a,{validate:ce,toolbar:o.a.createElement(M,{imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id",defaultValue:o.a.useMemo((function(){return Math.random().toString(36).substr(2,9)}),[])}),o.a.createElement(j.a,{source:"name",label:"Nome"}),o.a.createElement(te,{validate:function(e){console.log(e),"undefined"!==typeof e?(console.log("IMAGEM VALIDADA"),D(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},source:"imgsmall",acceptMultiple:!1,label:"Capa",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(te,{validate:function(e){"undefined"!==typeof e?(console.log("IMAGENS VALIDADAS"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(F.a,{source:"published",label:"P\xfablico",defaultValue:!1}),o.a.createElement(G.a,{open:i,autoHideDuration:3e3},o.a.createElement(z.a,{severity:f?"success":"error"},c))))},ie=t(550),ue=t.n(ie),me=t(549),ge=t.n(me),fe=t(346),de={apiKey:"AIzaSyD46nX4-Ks9WMiQ1hazUe2PZAkGX_Cq7kQ",authDomain:"altiereescultor.firebaseapp.com",databaseURL:"https://altiereescultor.firebaseio.com",projectId:"altiereescultor",storageBucket:"altiereescultor.appspot.com",messagingSenderId:"851171901718",appId:"1:851171901718:web:3f1bf7c3d4867dc7d25037",measurementId:"G-D5SPTWZ2H0"},be={logging:!0},pe=Object(i.FirebaseDataProvider)(de,be),ve=Object(i.FirebaseAuthProvider)(de,be),he=Object(fe.a)((function(){return ge.a}),"pt-br"),Ee=function(){return o.a.createElement(r.a,{dataProvider:pe,loginPage:f,authProvider:ve,i18nProvider:he},o.a.createElement(s.a,{name:"galeria",options:{label:"Galeria"},list:le,edit:re,create:se,icon:ue.a}),o.a.createElement(s.a,{name:"colecao",options:{label:"Posts"},list:$,edit:ee,create:Y}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[590,1,2]]]);
//# sourceMappingURL=main.816e8095.chunk.js.map