(this["webpackJsonpmain-admin"]=this["webpackJsonpmain-admin"]||[]).push([[0],{442:function(e,a,t){},587:function(e,a,t){e.exports=t(895)},895:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),c=t(19),l=t.n(c),r=(t(442),t(489)),s=t(464),i=t(408),u=t(313),m=t(397),g=function(e){return o.a.createElement("div",null,o.a.createElement("div",{style:{fontFamily:"monospace",marginLeft:"15px"}},o.a.createElement("p",null,"Digite seu email e senha cadastrados")),o.a.createElement(u.a,e),o.a.createElement("a",{href:"https://altieriescultor.com/",className:"goToSite"},"IR PARA O SITE"))},d=function(e){return o.a.createElement(m.a,e,o.a.createElement(g,e))},f=t(40),b=t.n(f),p=t(50),E=t(21),v=t(77),h=t(488),j=t(95),O=t(74),y=t(96),S=t(485),U=t(180),I=t(172),D=t(487),w=t(175),k=t(174),P=t(391),A=t(153),L=t(72),M=t(401),T=t(170),x=t(246),C=t(293),R=t(295),N=t(316),F=t(390),_=t(143),B=t(221),q=t(904),G=t(953),V=t(421),W=t(911);function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,t=Object(n.useState)(!1),o=Object(E.a)(t,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){var t;return c?t=setTimeout(e,a):clearTimeout(t),function(){clearTimeout(t)}}),[e,a,c]),{onMouseDown:function(){return l(!0)},onMouseUp:function(){return l(!1)},onMouseLeave:function(){return l(!1)},onTouchStart:function(){return l(!0)},onTouchEnd:function(){return l(!1)}}}var X=t(92),H=t.n(X),K=t(947),Q=t(948),Z=t(949);function J(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=Object(n.useState)([]),r=Object(E.a)(l,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){if(t[c])if("object"!==typeof t[c]){var e=[t[c]];i(e)}else i(Object.values(t[c]))}),[t,c]),o.a.createElement(o.a.Fragment,null,s.map((function(e,a){return o.a.createElement("div",{className:"urlPost",key:a},o.a.createElement("a",{href:e},a))})))}var $=t(187);function Y(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=e.setImgState,r=e.acceptMultiple,s=e.label,i=e.placeholder,u=e.validate,m=e.removeImage,g=Object(n.useState)([]),d=Object(E.a)(g,2),f=d[0],b=d[1];Object(n.useEffect)((function(){var e=!1;return function(){var a;t[c]&&("object"!==typeof t[c]?(a=[t[c]],e||b(a)):(a=Object.values(t[c]),e||b(a))),console.log(t)}(),function(){e=!0}}),[t,c]);var p=Object(n.useCallback)((function(e){var a=f;console.log(a),e.forEach((function(e){r?a.push(URL.createObjectURL(e)):a=[URL.createObjectURL(e)]})),b(a),l&&l(a),"undefined"!==typeof u&&u(a),console.log(a)}),[f,u,l,r]);var v=Object($.a)({accept:"image/*",multiple:r,noClick:!0,onDrop:p}),h=v.getRootProps,j=v.getInputProps,O=v.open,y=v.isDragActive;return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"MuiFormLabel-root MuiInputLabel-root  "},o.a.createElement("span",null,s)),o.a.createElement("div",Object.assign({},h(),{className:"UrlPostEditContainer"}),o.a.createElement("input",j()),y?o.a.createElement("p",null,i):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,i),o.a.createElement("button",{type:"button",onClick:O},"Clique para selecionar")),o.a.createElement("div",{className:"preview"},"object"===typeof f&&f.map((function(e,a){return o.a.createElement("div",{className:"imageContainer",key:a},o.a.createElement("img",{alt:"imagem",src:e,className:"imgEdit"}),o.a.createElement("span",{className:"btnDeleteImage",onClick:function(){return function(e){var a=f;m(f[e]),a.splice(e,1),b(a),l&&l(a)}(a)}},"X"))})))))}var ee=t(954),ae=t(16),te=t.n(ae);t(496);te.a.apps.length||te.a.initializeApp({apiKey:"AIzaSyD46nX4-Ks9WMiQ1hazUe2PZAkGX_Cq7kQ",authDomain:"altiereescultor.firebaseapp.com",databaseURL:"https://altiereescultor.firebaseio.com",projectId:"altiereescultor",storageBucket:"altiereescultor.appspot.com",messagingSenderId:"851171901718",appId:"1:851171901718:web:3f1bf7c3d4867dc7d25037",measurementId:"G-D5SPTWZ2H0"});var ne=te.a.storage();function oe(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(v.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(a).then((function(e){return e.blob()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){var a={};return e.title||(a.title=["\xc9 necess\xe1rio preencher o t\xedtulo"]),e.content||(a.content=["\xc9 necess\xe1rio preencher o conte\xfado"]),e.date||(a.date=["\xc9 necess\xe1rio uma data"]),a},re=function(e){return o.a.createElement(h.a,e,o.a.createElement(j.a,{label:"Pesquisar",source:"title",alwaysOn:!0}))},se=function(e){console.log(e);var a=Object(O.a)({type:"delete",resource:"colecao",payload:{id:e.id}}),t=Object(E.a)(a,2),n=t[0],c=t[1].loading;return console.log(c),o.a.createElement(B.a,{startIcon:o.a.createElement(H.a,null),onClick:n,variant:"contained",className:"deleteButton",disabled:c},"Excluir")},ie=function(e){var a=e.ids,t=e.data,n=e.basePath,c=e.handleLongPress,l=e.setId,r=z((function(){return c(!0)}),500);return o.a.createElement("div",{style:{margin:"1em"}},a.map((function(e){return o.a.createElement(q.a,{key:e,onMouseDown:function(){return a=e,console.log(a),l(a),void r.onMouseDown();var a},onMouseUp:function(){return r.onMouseUp()},onMouseLeave:function(){return r.onMouseLeave()},onTouchStart:function(){return a=e,console.log(a),l(a),void r.onTouchStart();var a},onTouchEnd:function(){return r.onTouchEnd()}},o.a.createElement(G.a,{multiline:"true",primary:o.a.createElement(y.a,{source:"title",record:t[e]}),secondary:"".concat(t[e].published?"Publicado":"N\xe3o Publicado")}),o.a.createElement(G.a,{multiline:"true",primary:o.a.createElement(y.a,{source:"date",record:t[e]})}),o.a.createElement(S.a,{resource:"posts",basePath:n,record:t[e]}))})))};ie.defaultProps={data:{},ids:[]};var ue=function(e){console.log(e);var a=Object(n.useState)(!1),t=Object(E.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(""),s=Object(E.a)(r,2),i=s[0],u=s[1],m=Object(V.a)((function(e){return e.breakpoints.down("sm")}));function g(e){console.log("LONG PRESS"),l(e)}return o.a.createElement(n.Fragment,null,o.a.createElement(K.a,{fullWidth:!0,open:c,onClose:function(){return g(!1)},"aria-label":"Excluir post"},o.a.createElement(Q.a,null,"Deseja excluir o post?"),o.a.createElement(Z.a,null,o.a.createElement(se,{id:i}))),o.a.createElement(U.b,Object.assign({},e,{title:"Posts",filters:o.a.createElement(re,null)}),m?o.a.createElement(ie,{handleLongPress:g,setId:function(e){u(e)}}):o.a.createElement(I.a,{rowClick:"edit"},o.a.createElement(y.a,{source:"id"}),o.a.createElement(y.a,{source:"title",label:"T\xedtulo"}),o.a.createElement(y.a,{source:"content",label:"Conte\xfado"}),o.a.createElement(D.a,{source:"imgsmall"}),o.a.createElement(J,{source:"imgs"}),o.a.createElement(w.a,{source:"date",label:"Data"}),o.a.createElement(k.a,{source:"published",label:"Publicado"}),o.a.createElement(w.a,{source:"lastupdate",label:"Atualizado em"}))))},me=function(e){var a=Object(n.useState)(""),t=Object(E.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(E.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(E.a)(m,2),d=g[0],f=g[1],h=Object(n.useState)([]),O=Object(E.a)(h,2),y=O[0],S=O[1],U=Object(n.useState)(""),I=Object(E.a)(U,2),D=I[0],w=I[1],k=function(e){var a=Object(P.a)("colecao"),t=Object(E.a)(a,1)[0],c=Object(A.a)(),r=Object(L.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(v.a)(b.a.mark((function a(n,o){var i,m,g,d,E,h,j;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),console.log(e.imgs),console.log(e.imgsmall),i=e.imgsmall,m=e.imgs,g=n.id,d=n.title,a.next=9,oe(i);case 9:E=a.sent,h={imgsmall:"",imgs:[]},(j=ne.ref("/colecao/".concat(g,"/imgsmall/").concat(d)).put(E)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),f(!1),u(!0)}),(function(){j.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgsmall=e;var a=0;m.forEach(function(){var e=Object(v.a)(b.a.mark((function e(i,E){var v,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(i);case 2:v=e.sent,(j=ne.ref("/colecao/".concat(g,"/imgs/").concat(d,"-").concat(E)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),f(!1),u(!0)}),(function(){j.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgs.push(e),console.log(m.length),console.log(a),a===m.length-1&&null!=h&&(console.log(h),t({payload:{data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.created","info",{smart_count:1}),c(o,s,a.id,a)}})),a++}))}));case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())}))}));case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(M.a,Object.assign({},e,{onSave:i}))},F=function(e){return o.a.createElement(T.a,e,o.a.createElement(k,{imgs:y,imgsmall:D,label:"SALVAR"}))};return o.a.createElement(x.b,e,o.a.createElement(C.a,{validate:le,toolbar:o.a.createElement(F,{imgsmall:D,imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id",defaultValue:o.a.useMemo((function(){return Math.random().toString(36).substr(2,9)}),[])}),o.a.createElement(j.a,{source:"title",label:"T\xedtulo"}),o.a.createElement(j.a,{multiline:!0,source:"content",label:"Conte\xfado"}),o.a.createElement(Y,{validate:function(e){console.log("TESTE"),console.log(e),"undefined"!==typeof e?(console.log("333TESTE"),w(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},source:"imgsmall",acceptMultiple:!1,label:"Capa do post",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(Y,{validate:function(e){console.log("TESTE222"),console.log(e),"undefined"!==typeof e?(console.log("333TESTE"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(R.a,{source:"date",label:"Data"}),o.a.createElement(N.a,{source:"published",label:"P\xfablico",defaultValue:!1}),o.a.createElement(W.a,{open:i,autoHideDuration:3e3},o.a.createElement(ee.a,{severity:d?"success":"error"},c))))},ge=function(e){var a=Object(n.useState)(""),t=Object(E.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(E.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(E.a)(m,2),d=g[0],f=g[1],h=Object(n.useState)([]),O=Object(E.a)(h,2),y=O[0],S=O[1],U=Object(n.useState)([]),I=Object(E.a)(U,2),D=I[0],w=I[1],k=Object(n.useState)(""),P=Object(E.a)(k,2),x=P[0],B=P[1];function q(e){var a=D;a.push(e),w(a)}function G(e){if(console.log(e),Array.isArray(e))e.forEach((function(e){(console.log(e),"undefined"!==typeof e)&&(-1===e.search("blob:")&&ne.refFromURL(e).delete().then((function(){l("Delete Success!"),f(!0),u(!0)}),(function(e){console.log(e),l("Delete error: "+e.message_),f(!1),u(!0)})))}));else if("undefined"!==typeof e&&-1===e.search("blob:")){console.log(e),ne.refFromURL(e).delete().then((function(){l("Delete Success!"),f(!0),u(!0)}),(function(e){console.log(e),l("Delete error: "+e.message_),f(!1),u(!0)}))}}console.log(e);var V=function(e){var a=Object(F.a)("colecao"),t=Object(E.a)(a,1)[0],c=Object(A.a)(),r=Object(L.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(v.a)(b.a.mark((function a(n,o){var i,m,g,d,E,h,j,O,y;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return G(D),i=e.imgsmall,console.log(i),void 0!==i&&""!==i||(console.log("ttttt"),i=n.imgsmall),0===(m=e.imgs).length&&(m=n.imgs),console.log(i),console.log(m),g=n.id,d=n.title,a.next=12,oe(i);case 12:E=a.sent,h={imgsmall:i,imgs:m},0===i.search("blob:")?(console.log("tese 1"),(j=ne.ref("/colecao/".concat(g,"/imgsmall/").concat(d)).put(E)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),f(!1),u(!0)}),(function(){j.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgsmall=e;var a=0,i=0;m.forEach(function(){var e=Object(v.a)(b.a.mark((function e(E,v){var j,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==E.search("blob:")){e.next=7;break}return i++,e.next=4,oe(E);case 4:j=e.sent,(O=ne.ref("/colecao/".concat(g,"/imgs/").concat(d,"-").concat(v)).put(j)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),f(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgs.push(e),a===m.length-1&&null!=h&&(console.log(h),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 7:a++;case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(i),0===i&&null!=h&&(console.log(h),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}))):(console.log("tese 2"),O=0,y=[],m.forEach(function(){var e=Object(v.a)(b.a.mark((function e(a,i){var E,v;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.search("blob:")),0!==a.search("blob:")){e.next=10;break}return e.next=4,oe(a);case 4:E=e.sent,(v=ne.ref("/colecao/".concat(g,"/imgs/").concat(d,"-").concat(i)).put(E)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),f(!1),u(!0)}),(function(){v.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgs.push(e),console.log(m.length),console.log(O),O===m.length-1&&null!=h&&(console.log(h),h.imgs=h.imgs.filter((function(e){return-1===e.search("blob:")})),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))})),O++,e.next=11;break;case 10:y.push(a);case 11:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(O),0===O&&null!=h&&(console.log(h),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:y,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}})));case 15:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(M.a,Object.assign({},e,{onSave:i}))},z=function(e){return o.a.createElement(T.a,e,o.a.createElement(V,{imgs:y,imgsmall:x,label:"SALVAR"}),o.a.createElement(se,{id:e.id}))};return o.a.createElement(_.b,e,o.a.createElement(C.a,{toolbar:o.a.createElement(z,{imgsmall:x,imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id"}),o.a.createElement(j.a,{source:"title",label:"T\xedtulo"}),o.a.createElement(j.a,{multiline:!0,source:"content",label:"Conte\xfado"}),o.a.createElement(Y,{validate:function(e){console.log("Teste Imagem"),console.log(e),"undefined"!==typeof e?(console.log("IMAGEM VALIDADA"),B(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},setImgState:function(e){B(e)},removeImage:q,source:"imgsmall",acceptMultiple:!1,label:"Capa do post",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(Y,{validate:function(e){console.log("Teste Images"),console.log(e),"undefined"!==typeof e?(console.log("Teste Images2"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},setImgState:function(e){S(e)},removeImage:q,source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(R.a,{source:"date",label:"Data"}),o.a.createElement(N.a,{source:"published",label:"Publicar"}),o.a.createElement(R.a,{disabled:!0,source:"lastupdate",label:"Atualizado em"}),o.a.createElement(W.a,{open:i,autoHideDuration:3e3},o.a.createElement(ee.a,{severity:d?"success":"error"},c))))};function de(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=Object(n.useState)([]),r=Object(E.a)(l,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){if(t[c])if("object"!==typeof t[c]){var e=[t[c]];i(e)}else i(Object.values(t[c]))}),[t,c]),o.a.createElement(o.a.Fragment,null,s.map((function(e,a){return o.a.createElement("div",{className:"urlPost",key:a},o.a.createElement("a",{href:e.src},a))})))}function fe(e){var a=e.record,t=void 0===a?{}:a,c=e.source,l=e.setImgState,r=e.acceptMultiple,s=e.label,i=e.placeholder,u=e.validate,m=e.removeImage,g=Object(n.useState)([]),d=Object(E.a)(g,2),f=d[0],b=d[1];Object(n.useEffect)((function(){var e=!1;return function(){var a;t[c]&&("object"!==typeof t[c]?(a=[t[c]],e||b(a)):(a=Object.values(t[c]),e||b(a))),console.log(t)}(),function(){e=!0}}),[t,c]);var p=Object(n.useCallback)((function(e){var a=f;console.log(a),e.forEach((function(e){r?a.push({src:URL.createObjectURL(e)}):a=[URL.createObjectURL(e)]})),b(a),l&&l(a),"undefined"!==typeof u&&u(a),console.log(a)}),[f,u,l,r]);function v(e){var a=f;m(f[e]),a.splice(e,1),b(a),l&&l(a)}var h=Object($.a)({accept:"image/*",multiple:r,noClick:!0,onDrop:p}),j=h.getRootProps,O=h.getInputProps,y=h.open,S=h.isDragActive;return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"MuiFormLabel-root MuiInputLabel-root  "},o.a.createElement("span",null,s)),o.a.createElement("div",Object.assign({},j(),{className:"UrlPostEditContainer"}),o.a.createElement("input",O()),S?o.a.createElement("p",null,i):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,i),o.a.createElement("button",{type:"button",onClick:y},"Clique para selecionar")),o.a.createElement("div",{className:"preview"},"object"===typeof f&&f.map((function(e,a){return o.a.createElement(n.Fragment,{key:a},r?o.a.createElement("div",{className:"imageContainer"},o.a.createElement("img",{alt:"imagem",src:e.src,className:"imgEdit"}),o.a.createElement("input",{className:"imgGaleriaTitle",type:"text",placeholder:"T\xedtulo para a imagem",onChange:function(e){return function(e,a){var t=f;console.log(e.target.value),t[a].title=e.target.value}(e,a)},defaultValue:e.title}),o.a.createElement("span",{className:"btnDeleteImage",onClick:function(){return v(a)}},"X")):o.a.createElement("div",{className:"imageContainer",key:a},o.a.createElement("img",{alt:"imagem",src:e,className:"imgEdit"}),o.a.createElement("span",{className:"btnDeleteImage",onClick:function(){return v(a)}},"X")))})))))}function be(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(v.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(a).then((function(e){return e.blob()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee=function(e){var a={};return e.name||(a.name=["\xc9 necess\xe1rio preencher o nome"]),a},ve=function(e){return o.a.createElement(h.a,e,o.a.createElement(j.a,{label:"Pesquisar",source:"name",alwaysOn:!0}))},he=function(e){console.log(e);var a=Object(O.a)({type:"delete",resource:"galeria",payload:{id:e.id}}),t=Object(E.a)(a,2),n=t[0],c=t[1].loading;return console.log(c),o.a.createElement(B.a,{startIcon:o.a.createElement(H.a,null),onClick:n,variant:"contained",className:"deleteButton",disabled:c},"Excluir")},je=function(e){var a=e.ids,t=e.data,n=e.basePath,c=e.handleLongPress,l=e.setId,r=z((function(){return c(!0)}),500);return o.a.createElement("div",{style:{margin:"1em"}},a.map((function(e){return o.a.createElement(q.a,{key:e,onMouseDown:function(){return a=e,console.log(a),l(a),void r.onMouseDown();var a},onMouseUp:function(){return r.onMouseUp()},onMouseLeave:function(){return r.onMouseLeave()},onTouchStart:function(){return a=e,console.log(a),l(a),void r.onTouchStart();var a},onTouchEnd:function(){return r.onTouchEnd()}},o.a.createElement(G.a,{multiline:"true",primary:o.a.createElement(y.a,{source:"name",record:t[e]}),secondary:"".concat(t[e].published?"Publicado":"N\xe3o Publicado")}),o.a.createElement(G.a,{multiline:"true",primary:"".concat(new Date(t[e].lastupdate).toLocaleDateString())}),o.a.createElement(S.a,{resource:"colecao",basePath:n,record:t[e]}))})))};je.defaultProps={data:{},ids:[]};var Oe=function(e){var a=Object(V.a)((function(e){return e.breakpoints.down("sm")})),t=Object(n.useState)(!1),c=Object(E.a)(t,2),l=c[0],r=c[1],s=Object(n.useState)(""),i=Object(E.a)(s,2),u=i[0],m=i[1];function g(e){console.log("LONG PRESS"),r(e)}return o.a.createElement(n.Fragment,null,o.a.createElement(K.a,{fullWidth:!0,open:l,onClose:function(){return g(!1)},"aria-label":"Excluir post"},o.a.createElement(Q.a,null,"Deseja excluir este card da galeria?"),o.a.createElement(Z.a,null,o.a.createElement(he,{id:u}))),o.a.createElement(U.b,Object.assign({},e,{title:"Galeria",filters:o.a.createElement(ve,null)}),a?o.a.createElement(je,{handleLongPress:g,setId:function(e){m(e)}}):o.a.createElement(I.a,{rowClick:"edit"},o.a.createElement(y.a,{source:"id"}),o.a.createElement(y.a,{source:"name",label:"Nome"}),o.a.createElement(D.a,{source:"imgsmall",label:"Capa"}),o.a.createElement(de,{source:"imgs",label:"Imagens"}),o.a.createElement(k.a,{source:"published",label:"Publicar"}))))},ye=function(e){var a=Object(n.useState)(""),t=Object(E.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(E.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(E.a)(m,2),d=g[0],f=g[1],h=Object(n.useState)([]),O=Object(E.a)(h,2),y=O[0],S=O[1],U=Object(n.useState)(""),I=Object(E.a)(U,2),D=I[0],w=I[1],k=Object(n.useState)([]),P=Object(E.a)(k,2),x=P[0],R=P[1];function B(e){var a=x;a.push(e),R(a)}function q(e){if(Array.isArray(e))e.forEach((function(e){"undefined"!==typeof e.src&&-1===e.src.search("blob:")&&ne.refFromURL(e.src).delete().then((function(){l("Delete Success!"),f(!0),u(!0)}),(function(e){l("Delete error: "+e),f(!1),u(!0)}))}));else if("undefined"!==typeof e&&-1===e.search("blob:")){console.log(e),ne.refFromURL(e).delete().then((function(){l("Delete Success!"),f(!0),u(!0)}),(function(e){l("Delete error: "+e),f(!1),u(!0)}))}}console.log(e);var G=function(e){var a=Object(F.a)("galeria"),t=Object(E.a)(a,1)[0],c=Object(A.a)(),r=Object(L.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(v.a)(b.a.mark((function a(n,o){var i,m,g,d,E,h,j,O,y;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return q(x),i=n.imgsmall,console.log(i),void 0!==i&&""!==i||(console.log("ttttt"),i=e.imgsmall),0===(m=e.imgs).length&&(m=n.imgs),console.log(m),g=n.id,d=n.name,a.next=11,be(i);case 11:E=a.sent,h={imgs:m,imgsmall:i},j=0,console.log(h),0===i.search("blob:")?(console.log("tese 1"),(O=ne.ref("/galeria/".concat(g,"/imgsmall/").concat(d)).put(E)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),f(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgsmall=e;var a=0,i=0;m.forEach(function(){var e=Object(v.a)(b.a.mark((function e(E,v){var j,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==E.src.search("blob:")){e.next=7;break}return i++,e.next=4,be(E.src);case 4:j=e.sent,(O=ne.ref("/galeria/".concat(g,"/imgs/").concat(d,"-").concat(v)).put(j)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),f(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgs.push({src:e,title:E.title}),a===m.length-1&&null!=h&&(console.log(h),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 7:a++;case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(i),0===i&&null!=h&&(console.log(h),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}))):(y=0,m.forEach(function(){var e=Object(v.a)(b.a.mark((function e(a,i){var E,v;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.src.search("blob:")),0!==a.src.search("blob:")){e.next=8;break}return y++,e.next=5,be(a.src);case 5:E=e.sent,(v=ne.ref("/galeria/".concat(g,"/imgs/").concat(d,"-").concat(i)).put(E)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),f(!1),u(!0)}),(function(){v.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgs.push({src:e,title:a.title}),console.log(m.length),console.log(j),j===m.length-1&&null!=h&&(console.log(h),h.imgs=h.imgs.filter((function(e){return-1===e.src.search("blob:")})),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}}))}))}));case 8:j++;case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),console.log(y),0===y&&null!=h&&(console.log(h),t({payload:{id:g,data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.updated","info",{smart_count:1}),c(o,s,a.id,a)}})));case 15:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(M.a,Object.assign({},e,{onSave:i}))},V=function(e){return o.a.createElement(T.a,e,o.a.createElement(G,{imgs:y,imgsmall:D,label:"SALVAR"}),o.a.createElement(he,{id:e.id}))};return o.a.createElement(_.b,e,o.a.createElement(C.a,{toolbar:o.a.createElement(V,{imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id"}),o.a.createElement(j.a,{source:"name",label:"Nome"}),o.a.createElement(fe,{validate:function(e){console.log(e),"undefined"!==typeof e?(console.log("IMAGEM VALIDADA"),w(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},setImgState:function(e){w(e)},removeImage:B,source:"imgsmall",acceptMultiple:!1,label:"Capa",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(fe,{validate:function(e){console.log(e),"undefined"!==typeof e?(console.log("IMAGENS VALIDADAS"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},setImgState:function(e){S(e)},removeImage:B,source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(N.a,{source:"published",label:"Publicado"}),o.a.createElement(W.a,{open:i,autoHideDuration:3e3},o.a.createElement(ee.a,{severity:d?"success":"error"},c))))},Se=function(e){var a=Object(n.useState)(""),t=Object(E.a)(a,2),c=t[0],l=t[1],r=Object(n.useState)(!1),s=Object(E.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(!1),g=Object(E.a)(m,2),d=g[0],f=g[1],h=Object(n.useState)([]),O=Object(E.a)(h,2),y=O[0],S=O[1],U=Object(n.useState)(""),I=Object(E.a)(U,2),D=I[0],w=I[1],k=function(e){var a=Object(P.a)("galeria"),t=Object(E.a)(a,1)[0],c=Object(A.a)(),r=Object(L.a)(),s=e.basePath,i=Object(n.useCallback)(function(){var a=Object(v.a)(b.a.mark((function a(n,o){var i,m,g,d,E,h,j,O;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),console.log(e.imgs),i=e.imgs,m=n.name,g=n.id,d=[],a.next=8,be(e.imgsmall);case 8:E=a.sent,h={imgs:[],imgsmall:""},j=0,(O=ne.ref("/galeria/".concat(g,"/imgsmall/").concat(m)).put(E)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgsmall"),l("Upload is "+a+"% done for imgsmall"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgsmall"),f(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgsmall=e,i.forEach(function(){var e=Object(v.a)(b.a.mark((function e(a,E){var v,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(a.src);case 2:v=e.sent,d.push(a.title),(O=ne.ref("/galeria/".concat(g,"/imgs/").concat(m,"-").concat(E)).put(v)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done for imgs"),l("Upload is "+a+"% done for imgs"),f(!0),u(!0)}),(function(e){l("Upload error: "+e+" for imgs"),f(!1),u(!0)}),(function(){O.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.imgs.push({src:e,title:a.title}),console.log(i.length),console.log(h),console.log("index: "+j),j===i.length&&null!=h&&(console.log(h),t({payload:{data:Object(p.a)(Object(p.a)({},n),{},{imgs:h.imgs,imgsmall:h.imgsmall})}},{onSuccess:function(e){var a=e.data;r("ra.notification.created","info",{smart_count:1}),c(o,s,a.id,a)}}))}))})),j++;case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())}))}));case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,r,c,s,e.imgs,e.imgsmall]);return o.a.createElement(M.a,Object.assign({},e,{onSave:i}))},R=function(e){return o.a.createElement(T.a,e,o.a.createElement(k,{imgs:y,imgsmall:D,label:"SALVAR"}))};return o.a.createElement(x.b,e,o.a.createElement(C.a,{validate:Ee,toolbar:o.a.createElement(R,{imgs:y})},o.a.createElement(j.a,{disabled:!0,source:"id",defaultValue:o.a.useMemo((function(){return Math.random().toString(36).substr(2,9)}),[])}),o.a.createElement(j.a,{source:"name",label:"Nome"}),o.a.createElement(fe,{validate:function(e){console.log(e),"undefined"!==typeof e?(console.log("IMAGEM VALIDADA"),w(e[0])):(l("\xc9 necess\xe1rio uma imagem de capa!"),u(!0))},source:"imgsmall",acceptMultiple:!1,label:"Capa",placeholder:"Arraste a imagem at\xe9 aqui ou"}),o.a.createElement(fe,{validate:function(e){"undefined"!==typeof e?(console.log("IMAGENS VALIDADAS"),S(e)):(l("Insira alguma imagem no Post!"),u(!0))},source:"imgs",acceptMultiple:!0,label:"Imagens",placeholder:"Arraste as imagens at\xe9 aqui ou"}),o.a.createElement(N.a,{source:"published",label:"P\xfablico",defaultValue:!1}),o.a.createElement(W.a,{open:i,autoHideDuration:3e3},o.a.createElement(ee.a,{severity:d?"success":"error"},c))))},Ue=t(548),Ie=t.n(Ue),De=t(547),we=t.n(De),ke=t(344),Pe={apiKey:"AIzaSyD46nX4-Ks9WMiQ1hazUe2PZAkGX_Cq7kQ",authDomain:"altiereescultor.firebaseapp.com",databaseURL:"https://altiereescultor.firebaseio.com",projectId:"altiereescultor",storageBucket:"altiereescultor.appspot.com",messagingSenderId:"851171901718",appId:"1:851171901718:web:3f1bf7c3d4867dc7d25037",measurementId:"G-D5SPTWZ2H0"},Ae={logging:!0},Le=Object(i.FirebaseDataProvider)(Pe,Ae),Me=Object(i.FirebaseAuthProvider)(Pe,Ae),Te=Object(ke.a)((function(){return we.a}),"pt-br"),xe=function(){return o.a.createElement(r.a,{dataProvider:Le,loginPage:d,authProvider:Me,i18nProvider:Te},o.a.createElement(s.a,{name:"galeria",options:{label:"Galeria"},list:Oe,edit:ye,create:Se,icon:Ie.a}),o.a.createElement(s.a,{name:"colecao",options:{label:"Posts"},list:ue,edit:ge,create:me}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[587,1,2]]]);
//# sourceMappingURL=main.d0b57f9a.chunk.js.map